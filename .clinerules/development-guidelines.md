# Phaser 2Dアクションクイズゲーム開発 `.clinerules`

## 概要
本ドキュメントは、Phaserベースの2Dアクションクイズゲーム開発において、
コード品質の一貫性・安全性・保守性を担保することを目的とする。
対象は「ソースコード（TypeScript/Phaser）」「Gitワークフロー」「コミュニケーション（レビュー・報告）」である。

---

## コーディング規約

### 命名規則
- クラス名・ファイル名: **PascalCase**（例: `PlayerController.ts`）
- 変数名・関数名: **camelCase**
- 定数: **UPPER_SNAKE_CASE**
- シーン名やキーは **英語の短い識別子** を使用

### フォーマット
- **Prettier** を利用し、自動整形を必須とする
  - 行幅: 80列
  - セミコロン必須
  - ダブルクォーテーションではなくシングルクォーテーションを使用

### コメント
- コメントは必ず **日本語** で記述する
- 各クラス・主要関数には **JSDoc形式のコメント** を付与する
- 「処理の意図」「なぜこの実装にしたか」を明示すること
- 読み手が初心者でも理解できる丁寧で分かりやすい表現を心がける

### 実装上の制約
- 各関数は **1つの責務のみを持ち、50行以内** に収める
- 循環的複雑度は **10以下** を目安とする
- ゲームロジックと描画処理は分離する（責務混在を禁止）
- グローバル変数の使用は禁止（定数のみ許可）

---

## 開発ワークフロー

### コミットメッセージ
- **Prefix** を必ず付与する: `feat`, `fix`, `refactor`, `docs`, `chore`, `test`
- **Scope** を必ず含める: （例: `feat(ui): クイズ選択肢のボタンを追加`）
- 本文は **日本語で簡潔に** 記述する

### コードレビュー
- 観点
  - 機能仕様との整合性
  - 可読性・保守性
  - パフォーマンス（FPS低下やGC発生リスク）
  - セキュリティ（ユーザー入力処理の妥当性）
- 機能性を損なわず、品質を向上させるリファクタリングを提案する
- コメント指摘も **日本語で丁寧に記載** する

### テスト
- 単体テストは開発者が実装する
- 統合テスト（プレイ確認）はコードレビュー後に実施する
- リリース前に必ず主要ブラウザ（Chrome, Firefox, Safari, Edge）とモバイルで確認する

---

## コミュニケーション

### タスク完了時の報告テンプレート
1. 変更内容（箇条書き）
2. 影響範囲（どのScene/Moduleに影響するか）
3. 動作確認結果（環境・ブラウザ）
4. 今後の懸念点やTODO

- 報告は簡潔で要点を押さえたものとする
- コメント・報告はすべて **日本語で記載**

---

## 禁止事項（MUST NOT）
- グローバル変数の使用（定数を除く）
- ゲームロジックと描画処理の混在
- ハードコーディングによるリソースパス指定
- APIキーや機密情報のコード内直接記述
- コメント・レビューを英語で記載すること

---

## 推奨事項（SHOULD）
- TypeScriptの型定義を積極的に活用する
- 関数型プログラミングのアプローチを優先する
- コメントは「意図」や「背景」を説明するものを重視する
- Clineが生成する出力を利用する場合は、このルールに必ず従うこと
